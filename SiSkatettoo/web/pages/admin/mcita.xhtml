<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./../../WEB-INF/templates/skatettoo.xhtml">

            <ui:define name="titulo">
                Mis Citas | Skatettoo
            </ui:define>

            <ui:define name="content">
                <div class="container fondo" >
                    <div class="row">
                        <div class="col-md-12 tabla">
                            <h4>Citas</h4>
                            <div class="table-responsive">
                                <h:form >
                                    <h:messages showSummary="true"/>
                                    <table id="mytable" class="table table-bordred table-striped tabla">
                                        <thead>
                                            <th>Sucursal</th>
                                            <th>Cliente</th>
                                            <th>Email</th>
                                            <th>Fecha y Hora</th>
                                            <th>Responder</th>
                                            <th>Aplazar</th>
                                            <th>Terminar</th>
                                        </thead>
                                        <tbody>
                                            <h:form>
                                                <ui:repeat value="#{citaManagedBean.listarAdmin()}" var="cita">
                                                    <tr>
                                                        <td>#{cita.idSucursal.nombre}</td>
                                                        <td>#{cita.idUsuario.nombre} #{cita.idUsuario.apellido}</td>
                                                        <td>#{cita.idUsuario.email}</td>
                                                        <td>
                                                            <h:outputText value="#{cita.fechaHora}">
                                                                <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss"/>
                                                            </h:outputText>
                                                        </td>
                                                        <td><h:commandButton class="btn btn-primary btn-xs" action="#{citaManagedBean.aplazarCitaA(cita)}" value="Aplazar"><span class="glyphicon glyphicon-pencil"></span></h:commandButton></td>
                                                        <td><h:commandButton class="btn btn-success btn-xs" action="#{citaManagedBean.actualizarCitaA(cita)}" value="Responder"><span class="glyphicon glyphicon-send"></span></h:commandButton></td>
                                                        <td><h:commandButton class="btn btn-danger btn-xs"  action="#{citaManagedBean.terminarCita(cita)}" value="Cancelar"><span class="glyphicon glyphicon-send"></span></h:commandButton></td>
                                                    </tr>
                                                </ui:repeat>
                                            </h:form>
                                        </tbody>
                                    </table>
                                    <h:messages showSummary="true" />
                                </h:form>
                            </div>

                        </div>
                    </div>
                </div>
            </ui:define>

        </ui:composition>

    </body>
</html>
