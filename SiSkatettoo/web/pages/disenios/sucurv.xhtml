<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <body>
        <ui:composition template="./../../WEB-INF/templates/skatettoo.xhtml">
            <ui:define name="head2">
                <h:outputStylesheet name="css/sucurv.css" />
                <h:outputStylesheet  name="css/datepicker.min.css"/>
                <h:outputScript name="js/datepicker.min.js" />
                <h:outputScript name="js/datepicker.es.js" />
            </ui:define>
            <ui:define name="titulo">
                #{panelSucursalManagedBean.sucu.nombre} | Skatettoo
            </ui:define>
            <ui:define name="top2"></ui:define>
            <ui:define name="content">
                <h:messages showSummary="true" />
                <div class="contenido-izquierda">
                    <div class="contenido-sucursal-header">
                        <img alt="Mert Salih Kaplan" src="../../img/#{panelSucursalManagedBean.sucu.fotoSuc}.jpg" class="avatar-sucursal"/>
                    </div>
                    <div class="contenido-sucursal listatatuadoressucursal">
                        <div class="info-sucursal">
                            <h1>#{panelSucursalManagedBean.sucu.nombre}</h1>
                            <p>#{panelSucursalManagedBean.sucu.direccion}</p>
                            <p>#{panelSucursalManagedBean.sucu.telefono}</p>
                            <p>#{panelSucursalManagedBean.sucu.descripcion}</p>
                            <h2>Tatuadores</h2>
                        </div>
                        <div class="sucursal-tattooist">
                            <h:form>
                                <ul id="display-inline-block-example">
                                    <ui:repeat value="#{panelSucursalManagedBean.tattuadoresSurcursal()}" var="item">
                                        <li>
                                            <h:graphicImage class="avatar-tatuador">
                                                <f:ajax event="click" listener="#{panelSucursalManagedBean.seleccionarTatt(item)}" render="disenios"/>
                                            </h:graphicImage>
                                            <span>#{item.nombre} #{item.apellido}</span></li>
                                    </ui:repeat>
                                </ul>
                            </h:form>
                        </div>
                    </div>
                    <div id="listadisenios">
                        <span class="tatuador-link">X</span>
                        <f:view>

                            <h:commandButton pt:data-toggle="modal" pt:data-target=".pop-up-1"/>
                            <h:form id="disenios">
                                <h1><h:outputText value="List"/></h1>
                                <h:dataTable value="#{panelSucursalManagedBean.listUsSucu()}" var="dis">
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="NombreD"/>
                                        </f:facet>
                                        <h:outputText value="#{dis.nombreD}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="NombreDisenio"/>
                                        </f:facet>
                                        <h:outputText value="#{dis.nombreDisenio}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="SesionesRecomendadas"/>
                                        </f:facet>
                                        <h:outputText value="#{dis.sesionesRecomendadas}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="PrecioDisenio"/>
                                        </f:facet>
                                        <h:outputText value="#{dis.precioDisenio}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="Anotaciones"/>
                                        </f:facet>
                                        <h:outputText value="#{dis.anotaciones}"/>
                                    </h:column>
                                    <h:column>
                                        <f:facet name="header">
                                            <h:outputText value="IdEstiloDisenio"/>
                                        </f:facet>
                                        <h:outputText value="#{dis.idEstiloDisenio.nombreEstilo}"/>
                                    </h:column>
                                </h:dataTable>
                            </h:form>
                        </f:view>

                    </div>
                    <script>
                        $('.tatuador-link').on('click', function () {
                            $("html, body").animate({scrollTop: $('#listadisenios').offset().top}, 700);
                        });
                    </script>
                </div>
                <div class="modal fade pop-up-1" id="squarespaceModal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">Ã—</span><span class="sr-only">Close</span></button>
                                <h3 class="modal-title text-center" id="lineModalLabel">Solicitar Cita</h3>
                            </div>
                            <div class="modal-body">
                                <!-- content goes here -->
                                <h:form class="form-horizontal"  pt:method="post" prependId="false">
                                        <fieldset>
                                            <!-- Name input-->
                                            <div class="form-group">
                                                <h:outputLabel class="col-md-3 control-label" value="Fecha Hora:" for="fechaHora" />
                                                <div class="col-md-9">
                                                    <h:inputText pt:data-language='es' pt:data-time-format='hh:ii:00' pt:data-timepicker="true" class="form-control" id="fechaHora" pt:placeholder="mm/dd/yyyy hh:mm:ss" value="#{citaManagedBean.cita.fechaHora}" title="FechaHora" required="true" requiredMessage="The FechaHora field is required.">
                                                        <f:convertDateTime pattern="MM/dd/yyyy HH:mm:ss" />
                                                    </h:inputText>
                                                </div>
                                            </div>

                                            <!-- Email input-->
                                            <div class="form-group">
                                                <h:outputLabel class="col-md-3 control-label" value="Tatuador:" for="tatuador" />
                                                <div class="col-md-9">
                                                    <h:selectOneMenu class="form-control" id="tatuador" value="#{citaManagedBean.cita.tatuador}" required="true" requiredMessage="The IdSucursal field is required.">
                                                        <!-- TODO: update below reference to list of available items-->
                                                        <f:selectItems value="#{panelSucursalManagedBean.tattuadoresSurcursal()}" var="sucu" itemLabel="#{sucu.nombre} #{sucu.apellido}"/>
                                                    </h:selectOneMenu>
                                                </div>
                                            </div>
                                            <br/>
                                            <div class="form-group">
                                                <h:outputLabel class="col-md-3 control-label" value="Adjuntar imagen:" />
                                                <div class="col-md-9">
                                                    <div class="input-group image-preview">
                                                        <span class="input-group-btn">
                                                            <!-- image-preview-clear button -->
                                                            <!-- image-preview-input -->
                                                            <div class="btn btn-default image-preview-input">
                                                                <input type="file" accept="image/png, image/jpeg, image/gif" name="input-file-preview"/> <!-- rename it -->
                                                                <span class="glyphicon glyphicon-folder-open"></span>
                                                                <span class="image-preview-input-title">Buscar</span>
                                                            </div>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Message body -->
                                            <div class="form-group">
                                                <h:outputLabel class="col-md-3 control-label" value="Descripcion:" for="descripcion" />
                                                <div class="col-md-9">
                                                    <h:inputTextarea pt:placeholder="Escribe los detalles de la cita" class="form-control" rows="10" cols="30" id="descripcion" value="#{citaManagedBean.cita.descripcion}" title="Descripcion" required="true" requiredMessage="The Descripcion field is required."/>
                                                </div>
                                            </div>

                                            <!-- Form actions -->
                                            <div class="form-group">
                                                <div class="col-md-12 text-right">
                                                    <h:commandButton type="submit" value="Enviar" class="btn btn-lg btn-success" actionListener="#{citaManagedBean.solicitarCita()}"/>
                                                </div>
                                            </div>
                                        </fieldset>

                                    <script>
                                        var disabledDays = [0];
                                        $("#fechaHora").datepicker({
                                            dateFormat: 'mm/dd/yyyy',
                                            timeFormat: 'hh:ii:ss ',
                                            onRenderCell: function (date, cellType) {
                                                if (cellType == 'day') {
                                                    var day = date.getDay(),
                                                            isDisabled = disabledDays.indexOf(day) != -1;

                                                    return {
                                                        disabled: isDisabled
                                                    }
                                                }
                                            }
                                        });
                                    </script>
                                </h:form>
                            </div>
                        </div>
                    </div>
                </div>
            </ui:define>

        </ui:composition>
    </body>
</html>

